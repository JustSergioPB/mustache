<form class="form" [formGroup]="form">
  <mustache-form-field>
    <label mustacheLabel for="email"> Email </label>
    <input
      id="email"
      mustacheInput
      type="email"
      placeholder="mr.mustache@gmail.com"
      formControlName="email"
    />
    <p
      mustacheFormFieldError
      *ngIf="form.controls.email.touched && form.controls.email.invalid"
    >
      {{ getEmailError() }}
    </p>
  </mustache-form-field>
  <mustache-form-field>
    <label mustacheLabel for="password"> Password </label>
    <input
      id="password"
      mustacheInput
      type="{{ showPassword ? 'text' : 'password' }}"
      placeholder="mustache"
      formControlName="password"
    />
    <button
      mustacheFormFieldIcon
      [icon]="'heart'"
      (click)="showPassword = !showPassword"
    ></button>
    <p
      mustacheFormFieldError
      *ngIf="form.controls.password.touched && form.controls.password.invalid"
    >
      {{ getPasswordError() }}
    </p>
    <!--TODO: add password strengh indicator-->
  </mustache-form-field>
  <div class="form__requirements">
    <mustache-requirement [isFulfilled]="hasLowerCaseChar"
      >One lowercase character</mustache-requirement
    >
    <mustache-requirement [isFulfilled]="hasUpperCaseChar"
      >One uppercase character</mustache-requirement
    >
    <mustache-requirement [isFulfilled]="hasSpecialChar"
      >One special character</mustache-requirement
    >
    <mustache-requirement [isFulfilled]="hasOneNumber"
      >One number character</mustache-requirement
    >
    <mustache-requirement [isFulfilled]="isLongerThan8"
      >8 character minimum</mustache-requirement
    >
  </div>
  <mustache-checkbox class="policy">
    <span class="text--comment-semibold text--gray-400"
      >By signing up, you agree to our
      <a
        href="#"
        class="link link--primary-500 text--comment-semibold text--primary-500"
        (click)="onTermsClicked($event)"
      >
        Terms & conditions
      </a>
      and
      <a
        href="#"
        class="link link--primary-500 text--comment-semibold text--primary-500"
        (click)="onPolicyClicked($event)"
      >
        Privacy policy
      </a>
    </span>
  </mustache-checkbox>
  <div class="form__actions">
    <button
      mustacheButton
      [position]="'center'"
      (click)="onSignUpSubmited()"
      [disabled]="isLoading"
    >
      Sign up
    </button>
    <mustache-spinner
      *ngIf="showSpinner"
      [isLoading]="isLoading"
      [success]="isSuccessful"
    ></mustache-spinner>
  </div>
  <p
    class="form-error text--comment-semibold text--danger-500"
    *ngIf="errorMessage"
  >
    {{ errorMessage }}
  </p>
</form>
<span class="redirect text--comment-semibold text--gray-400">
  Already have an account?
  <a
    href="#"
    class="link link--primary-500 text--comment-semibold text--primary-500"
    (click)="onLoginClicked($event)"
  >
    Log in
  </a>
</span>
